<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Setting Up the Game </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Setting Up the Game ">
    <meta name="generator" content="docfx 2.58.0.0">
    
    <link rel="shortcut icon" href="../../images/icon48.png">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../images/icon48.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="setting-up-the-game">Setting Up the Game</h1>

<p>In this section, we'll be going over Ladybug's <code>Game</code> and <code>Scene</code> classes, and how you will use them to get your game up and running.</p>
<h4 id="prerequisites">Prerequisites</h4>
<p>To follow this article, you will need to have created a new project that references both MonoGame and Ladybug.</p>
<p>See the <a href="/ladybug/articles/getting-started/installation.html">previous article</a> for guidance on setting up a new Ladybug project.</p>
<h2 id="ladybugs-game-class">Ladybug's Game Class</h2>
<p>Ladybug is built upon Monogame/XNA, and at its most basic level runs on the same underlying <code>Game</code> class.</p>
<p>Where Ladybug's <code>Game</code> class differs is with the concept of Scenes -- independent game loops that can manage their own resources and lifecycles, and can run concurrently with one another.</p>
<h3 id="creating-a-new-game-instance">Creating a New Game Instance</h3>
<p>To get started with Ladybug, the first thing you will need to create is a <code>Game</code> instance. The <code>Game</code> instance has many responsibilities, but its biggest job is handling Scenes, which hold the bulk of your game's logic and behavior.
To create a <code>Game</code> instance, instantiate one in your program's <code>Main</code> method as follows:</p>
<pre><code class="lang-csharp">using System;
using Ladybug;

public static class Program
{
	[STAThread]
	static void Main()
	{
		using (var game = new Game())
		{
			game.Run();
		}
	}
}
</code></pre>
<p>The above code will run as-is, but will produce only an empty window. To build a game that is playable, we'll need to begin creating Scenes.</p>
<h2 id="what-is-a-scene">What is a Scene?</h2>
<p>A <code>Scene</code> is an independent game loop that handles its own load/run/unload lifecycle, manages its own resources, and manages frame-by-frame updates to logic and drawing. In essence, it is a logical re-implmentation of MonoGame/XNA's <code>Game</code> class that provides extra functionality.</p>
<p>Having multiple active Scenes allows you to have simpler, more focused Update and Draw loops and more well-defined resource ownership, allowing each Scene to only be concerned with one self-contained part of the game.</p>
<p>Furthermore, Scenes can be paused, resumed, and switched between on the fly. They can share common resources, and transfer state through the root <code>Game</code> object which maintains them.</p>
<h3 id="components-of-a-scene">Components of a Scene</h3>
<p>A <code>Scene</code> contains a wide array of methods that allow you to define its behavior throughout its lifecycle. The four primary methods that should be defined in every Scene are as follows:</p>
<ul>
<li><code>OnLoadContent()</code>, where assets are loaded in for use in the <code>Scene</code></li>
<li><code>OnInitalize()</code>, where variables and properties are set to their initial values</li>
<li><code>OnUpdate()</code>, in which game objects are updated every frame</li>
<li><code>OnDraw()</code>, in which all drawing logic is handled</li>
</ul>
<p>Other methods exist that allow you to further define behavior at different points in the lifecycle, such as when the Scene's Active/Paused/Suspended state changes, and when it is unloaded and removed from the <code>Game</code> instance that is managing it.
For a full reference of these methods, check out the <a href="/ladybug/api/Ladybug.Scene.html">Ladybug.Scene documentation</a>.</p>
<h3 id="loading-and-unloading-scenes">Loading and Unloading Scenes</h3>
<p>You can load a <code>Scene</code> into a <code>Game</code> instance by calling its <code>LoadScene()</code> method and passing it a new <code>Scene</code> object. Once loaded, a Scene is immediately initialized and set to the <code>ACTIVE</code> state, where it will have its <code>OnUpdate()</code> and <code>OnDraw()</code> methods called every frame.</p>
<p>To unload a <code>Scene</code>, you can call <code>Unload()</code> on the Scene instance. Once Unloaded, a <code>Scene</code> is effectively destroyed, and would have to be Loaded again to be reactivated.</p>
<h3 id="managing-a-scenes-state">Managing a Scene's State</h3>
<p>Scenes have a range of states they can be in at any one time (determined by the <code>Scene.State</code> enum)</p>
<ul>
<li><code>ACTIVE</code>: Both <code>OnUpdate()</code> and <code>OnDraw()</code> are called every frame.</li>
<li><code>PAUSED</code>: <code>OnDraw()</code> is called every frame, but <code>OnUpdate()</code> is not.</li>
<li><code>SUSPENDED</code>: Neither <code>OnUpdate()</code> nor <code>OnDraw()</code> is called.</li>
</ul>
<p>A Scene's state can be changed through the <code>Pause()</code>, <code>Unpause()</code>, <code>Suspend()</code>, and <code>Unsuspend()</code> methods.</p>
<p>Further, a Scene's behavior upon changing state can be defined through the <code>Paused</code>, <code>Unpaused</code>, <code>Suspended</code>, <code>Unsuspended</code>, <code>Stopped</code>, and <code>Resumed</code> events, as well as through the <code>OnPause()</code>, <code>OnUnpause()</code>, <code>OnSuspend()</code>, <code>OnUnsuspend()</code>, <code>OnStop()</code>, and <code>OnResume()</code> methods.</p>
<h3 id="making-a-scene">Making a Scene</h3>
<p>To create a <code>Scene</code>, simply instantiate a new <code>Scene</code> object using <code>Scene.Compose()</code> and use its <code>On*()</code> methods to define its behavior. This can be done anywhere in your project, but for sample purposes, we'll show you what this would look like if we were to create it right where we set up our <code>Game</code> instance.</p>
<pre><code class="lang-csharp">// Instantiate a new Game instance, called game.
using (var game = new Game())
{
	// Instantiate a new Scene instance, called scene.
	var scene = Scene.Compose(game)
		.OnLoadContent(() =&gt;
		{
			// Content resources are loaded here
			// -or-
			// define a LoadContent() method elsewhere
			// and replace this with OnLoadContent(LoadContent)
		})
		.OnInitialize(() =&gt;
		{
			// Initialization logic here.
			// -or-
			// define an Initialize() method elsewhere
			// and replace this with OnInitialize(Initialize)
		})
		.OnUpdate((GameTime gameTime) =&gt;
		{
			// Update logic here
			// -or-
			// define an Update(GameTime) method elsewhere
			// and replace this with OnUpdate(Update)
		})
		.OnDraw((GameTime gameTime) =&gt;
		{
			// Draw logic here
			// -or-
			// define a Draw(GameTime) method elsewhere
			// and replace this with OnDraw(Draw)
		});

	// Load the new Scene into the Game instance.
	// At this point, scene.OnLoadContent() and scene.OnInitialize() are called.
	game.LoadScene(scene);

	// Begin game loop execution.
	// At this point, scene.OnUpdate() and scene.OnDraw() are called
	// every frame, as are the OnUpdate() and OnDraw() methods of any other
	// Scenes loaded into this Game instance.
	game.Run();
}

</code></pre>
<p><em>If you're using the Shared Project/Platform Target Project project structure, you will be creating your scenes in the Shared Project, unless the scene contains platform-specific code. See <a href="/ladybug/articles/installation.html">Installation and Setup</a> for a project structure example.</em></p>
<h2 id="putting-it-all-together">Putting it All Together</h2>
<p>Now that we've reviewed instantiating a new <code>Game</code> instance, creating a <code>Scene</code> instance, we'll walk through a quick example of using both together.</p>
<p>We'll create a simple game that prints <code>Hello World</code> to the console and then closes itself.</p>
<h3 id="a-review-the-main-method">A Review: The Main Method</h3>
<p>The Main Method is the entry point to our game application, so we will need to instantiate the <code>Game</code> class there and load in the initial <code>Scene</code>, which we will define in the next step.</p>
<pre><code class="lang-csharp">static void Main()
{
	using (var game = new Game())
	{
		// todo: load scene once we've created it
		// game.LoadScene(mainScene)
		
		game.Run();
	}
}
</code></pre>
<p>As mentioned before, this code will run but won't produce anything interesting.</p>
<h3 id="creating-the-main-scene">Creating the Main Scene</h3>
<p>Although we can create a scene right within the <code>using</code> block in <code>Main()</code>, we'll explore creating the <code>Scene</code> in a new method in the <code>Program</code> class for this example. We'll call this method <code>CreateMainScene()</code>.</p>
<pre><code class="lang-csharp">public Scene CreateMainScene(Game game)
{
	var mainScene = Scene.Compose(game)
		.OnUpdate((GameTime gameTime) =&gt;
		{
			Console.WriteLine(&quot;Hello World&quot;);
			game.Exit();
		});
	return mainScene;
}
</code></pre>
<h3 id="loading-the-main-scene">Loading the Main Scene</h3>
<p>Now that we've created the method that will be defining our Scene's behavior, we can load it into the <code>Game</code> instance.</p>
<pre><code class="lang-csharp">static void Main()
{
	// Creates the new Game instance
	using (var game = new Game())
	{
		// Creates the new Scene instance
		var mainScene = CreateMainScene(game);
		
		// Loads the Scene instance into the Game instance
		// OnLoadContent() and OnInitialize() are called here
		game.LoadScene(mainScene)

		// Begins the main game loop
		// OnUpdate() and OnDraw() are called here every frame
		game.Run();
	}
}
</code></pre>
<p>Running the code should now produce a single <code>Hello World</code> in the output console. With that, you've successfully created a (very) basic game application in Ladybug!</p>
<h2 id="wrapping-up">Wrapping Up</h2>
<p>Now that you have a basic grasp of Ladybug's <code>Game</code> and <code>Scene</code> classes, you're ready to create some games!</p>
<p>Here's where you can go from here:</p>
<ul>
<li>Check out the <a href="/ladybug/articles/tutorials/1/intro.html">Learning Ladybug with Snake</a> tutorial and walk through re-creating the classic game of Snake with Ladybug</li>
<li>Look through the excellent MonoGame/XNA Tutorials on <a href="http://rbwhitaker.wikidot.com/monogame-tutorials">R.B. Whitaker's Wiki</a></li>
<li>Take a look at the <a href="http://www.monogame.net/documentation/?page=main">MonoGame Documentation</a> for more tutorials</li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/WelcomeToMonday/ladybug/blob/documentation/docs-src/articles/getting-started/setting-up-the-game.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
